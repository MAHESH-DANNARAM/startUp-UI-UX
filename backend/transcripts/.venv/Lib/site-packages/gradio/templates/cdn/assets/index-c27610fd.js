import{S as he,e as ge,s as me,O as K,N as T,K as b,U as B,p as O,Q as I,n as te,A as S,a1 as be,F as ce,h as Z,P as ee,R as pe,m as rl,aq as il,j as ne,k as j,M as q,o as G,t as ae,z as M,u as X,v as U,y as x,x as Q,B as Fe,J as $,a7 as P,G as W,H as _e,I as de,al as fl,E as ul,ae as ol,q as cl,r as _l}from"./index-f877dfd5.js";import{a as He,B as dl}from"./Button-11a87b79.js";import{U as hl}from"./Upload-3aa22eef.js";import"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{d as gl}from"./dsv-576afacd.js";var Ne=Object.prototype.hasOwnProperty;function se(a,e){var l,t;if(a===e)return!0;if(a&&e&&(l=a.constructor)===e.constructor){if(l===Date)return a.getTime()===e.getTime();if(l===RegExp)return a.toString()===e.toString();if(l===Array){if((t=a.length)===e.length)for(;t--&&se(a[t],e[t]););return t===-1}if(!l||typeof a=="object"){t=0;for(l in a)if(Ne.call(a,l)&&++t&&!Ne.call(e,l)||!(l in e)||!se(a[l],e[l]))return!1;return Object.keys(e).length===t}}return a!==a&&e!==e}function Ee(a){let e,l,t;return{c(){e=T("input"),b(e,"tabindex","-1"),e.value=a[0],b(e,"class","svelte-q8uklq"),B(e,"header",a[3])},m(n,r){O(n,e,r),a[7](e),l||(t=[I(e,"keydown",a[6]),I(e,"blur",a[8])],l=!0)},p(n,r){r&1&&e.value!==n[0]&&(e.value=n[0]),r&8&&B(e,"header",n[3])},d(n){n&&S(e),a[7](null),l=!1,be(t)}}}function ml(a){let e;return{c(){e=ee(a[0])},m(l,t){O(l,e,t)},p(l,t){t&1&&pe(e,l[0])},d(l){l&&S(e)}}}function bl(a){let e,l;return{c(){e=new il(!1),l=rl(),e.a=l},m(t,n){e.m(a[0],t,n),O(t,l,n)},p(t,n){n&1&&e.p(t[0])},d(t){t&&(S(l),e.d())}}}function pl(a){let e,l,t,n,r=a[2]&&Ee(a);function c(f,o){return f[4]==="markdown"||f[4]==="html"?bl:ml}let i=c(a),_=i(a);return{c(){r&&r.c(),e=K(),l=T("span"),_.c(),b(l,"tabindex","-1"),b(l,"role","button"),b(l,"class","svelte-q8uklq"),B(l,"edit",a[2])},m(f,o){r&&r.m(f,o),O(f,e,o),O(f,l,o),_.m(l,null),t||(n=I(l,"dblclick",a[5]),t=!0)},p(f,[o]){f[2]?r?r.p(f,o):(r=Ee(f),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),i===(i=c(f))&&_?_.p(f,o):(_.d(1),_=i(f),_&&(_.c(),_.m(l,null))),o&4&&B(l,"edit",f[2])},i:te,o:te,d(f){f&&(S(e),S(l)),r&&r.d(f),_.d(),t=!1,n()}}}function wl(a,e,l){let{edit:t}=e,{value:n=""}=e,{el:r}=e,{header:c=!1}=e,{datatype:i="str"}=e;function _(p){ce.call(this,a,p)}function f(p){ce.call(this,a,p)}function o(p){Z[p?"unshift":"push"](()=>{r=p,l(1,r)})}const m=({currentTarget:p})=>{l(0,n=p.value),p.setAttribute("tabindex","-1")};return a.$$set=p=>{"edit"in p&&l(2,t=p.edit),"value"in p&&l(0,n=p.value),"el"in p&&l(1,r=p.el),"header"in p&&l(3,c=p.header),"datatype"in p&&l(4,i=p.datatype)},[n,r,t,c,i,_,f,o,m]}class Je extends he{constructor(e){super(),ge(this,e,wl,pl,me,{edit:2,value:0,el:1,header:3,datatype:4})}}function Le(a,e,l){const t=a.slice();return t[53]=e[l],t[55]=l,t}function qe(a,e,l){const t=a.slice();return t[56]=e[l].value,t[57]=e[l].id,t[58]=e,t[59]=l,t}function Be(a,e,l){const t=a.slice();return t[56]=e[l].value,t[57]=e[l].id,t[60]=e,t[55]=l,t}function Me(a){let e,l;return{c(){e=T("p"),l=ee(a[1]),b(e,"class","svelte-1tclfmr")},m(t,n){O(t,e,n),q(e,l)},p(t,n){n[0]&2&&pe(l,t[1])},d(t){t&&S(e)}}}function Oe(a){let e,l;return{c(){e=T("caption"),l=ee(a[1]),b(e,"class","sr-only")},m(t,n){O(t,e,n),q(e,l)},p(t,n){n[0]&2&&pe(l,t[1])},d(t){t&&S(e)}}}function Se(a,e){let l,t,n,r,c,i,_,f,o,m,p,h=e[57],A,d,C;function y(w){e[30](w,e[57])}function g(){return e[31](e[57])}let N={value:e[56],edit:e[13]===e[57],header:!0};e[10][e[57]].input!==void 0&&(N.el=e[10][e[57]].input),n=new Je({props:N}),Z.push(()=>ne(n,"el",y)),n.$on("keydown",e[21]),n.$on("dblclick",g);function L(){return e[32](e[55])}const v=()=>e[33](l,h),R=()=>e[33](null,h);return{key:a,first:null,c(){l=T("th"),t=T("div"),j(n.$$.fragment),c=K(),i=T("div"),_=$("svg"),f=$("path"),m=K(),b(f,"d","M4.49999 0L8.3971 6.75H0.602875L4.49999 0Z"),b(_,"width","1em"),b(_,"height","1em"),b(_,"viewBox","0 0 9 7"),b(_,"fill","none"),b(_,"xmlns","http://www.w3.org/2000/svg"),b(_,"class","svelte-1tclfmr"),b(i,"class",o="sort-button "+e[11]+" svelte-1tclfmr"),B(i,"sorted",e[12]===e[55]),B(i,"des",e[12]===e[55]&&e[11]==="des"),b(t,"class","cell-wrap svelte-1tclfmr"),b(l,"aria-sort",p=e[15](e[56],e[12],e[11])),b(l,"class","svelte-1tclfmr"),B(l,"editing",e[13]===e[57]),this.first=l},m(w,z){O(w,l,z),q(l,t),G(n,t,null),q(t,c),q(t,i),q(i,_),q(_,f),q(l,m),v(),A=!0,d||(C=I(i,"click",L),d=!0)},p(w,z){e=w;const J={};z[0]&256&&(J.value=e[56]),z[0]&8448&&(J.edit=e[13]===e[57]),!r&&z[0]&1280&&(r=!0,J.el=e[10][e[57]].input,ae(()=>r=!1)),n.$set(J),(!A||z[0]&2048&&o!==(o="sort-button "+e[11]+" svelte-1tclfmr"))&&b(i,"class",o),(!A||z[0]&6400)&&B(i,"sorted",e[12]===e[55]),(!A||z[0]&6400)&&B(i,"des",e[12]===e[55]&&e[11]==="des"),(!A||z[0]&6400&&p!==(p=e[15](e[56],e[12],e[11])))&&b(l,"aria-sort",p),h!==e[57]&&(R(),h=e[57],v()),(!A||z[0]&8448)&&B(l,"editing",e[13]===e[57])},i(w){A||(M(n.$$.fragment,w),A=!0)},o(w){U(n.$$.fragment,w),A=!1},d(w){w&&S(l),Q(n),R(),d=!1,C()}}}function Te(a,e){let l,t,n,r,c,i=e[57],_,f,o;function m(L){e[34](L,e[56],e[58],e[59])}function p(L){e[35](L,e[57])}let h={edit:e[7]===e[57],datatype:Array.isArray(e[0])?e[0][e[59]]:e[0]};e[56]!==void 0&&(h.value=e[56]),e[10][e[57]].input!==void 0&&(h.el=e[10][e[57]].input),n=new Je({props:h}),Z.push(()=>ne(n,"value",m)),Z.push(()=>ne(n,"el",p));const A=()=>e[36](l,i),d=()=>e[36](null,i);function C(){return e[37](e[57])}function y(){return e[38](e[57])}function g(){return e[39](e[57])}function N(...L){return e[40](e[55],e[59],e[57],...L)}return{key:a,first:null,c(){l=T("td"),t=T("div"),j(n.$$.fragment),b(t,"class","cell-wrap svelte-1tclfmr"),B(t,"border-transparent",e[6]!==e[57]),b(l,"tabindex","0"),b(l,"class","svelte-1tclfmr"),this.first=l},m(L,v){O(L,l,v),q(l,t),G(n,t,null),A(),_=!0,f||(o=[I(l,"touchstart",C,{passive:!0}),I(l,"click",y),I(l,"dblclick",g),I(l,"keydown",N)],f=!0)},p(L,v){e=L;const R={};v[0]&640&&(R.edit=e[7]===e[57]),v[0]&513&&(R.datatype=Array.isArray(e[0])?e[0][e[59]]:e[0]),!r&&v[0]&512&&(r=!0,R.value=e[56],ae(()=>r=!1)),!c&&v[0]&1536&&(c=!0,R.el=e[10][e[57]].input,ae(()=>c=!1)),n.$set(R),(!_||v[0]&576)&&B(t,"border-transparent",e[6]!==e[57]),i!==e[57]&&(d(),i=e[57],A())},i(L){_||(M(n.$$.fragment,L),_=!0)},o(L){U(n.$$.fragment,L),_=!1},d(L){L&&S(l),Q(n),d(),f=!1,be(o)}}}function Ce(a,e){let l,t=[],n=new Map,r,c,i=W(e[53]);const _=f=>f[57];for(let f=0;f<i.length;f+=1){let o=qe(e,i,f),m=_(o);n.set(m,t[f]=Te(m,o))}return{key:a,first:null,c(){l=T("tr");for(let f=0;f<t.length;f+=1)t[f].c();r=K(),b(l,"class","svelte-1tclfmr"),this.first=l},m(f,o){O(f,l,o);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(l,null);q(l,r),c=!0},p(f,o){e=f,o[0]&460481&&(i=W(e[53]),X(),t=_e(t,o,_,1,e,i,n,l,de,Te,r,qe),x())},i(f){if(!c){for(let o=0;o<i.length;o+=1)M(t[o]);c=!0}},o(f){for(let o=0;o<t.length;o+=1)U(t[o]);c=!1},d(f){f&&S(l);for(let o=0;o<t.length;o+=1)t[o].d()}}}function kl(a){let e,l,t,n,r=[],c=new Map,i,_,f=[],o=new Map,m,p=a[1]&&a[1].length!==0&&Oe(a),h=W(a[8]);const A=y=>y[57];for(let y=0;y<h.length;y+=1){let g=Be(a,h,y),N=A(g);c.set(N,r[y]=Se(N,g))}let d=W(a[9]);const C=y=>y[53];for(let y=0;y<d.length;y+=1){let g=Le(a,d,y),N=C(g);o.set(N,f[y]=Ce(N,g))}return{c(){e=T("table"),p&&p.c(),l=K(),t=T("thead"),n=T("tr");for(let y=0;y<r.length;y+=1)r[y].c();i=K(),_=T("tbody");for(let y=0;y<f.length;y+=1)f[y].c();b(n,"class","svelte-1tclfmr"),b(t,"class","svelte-1tclfmr"),b(_,"class","svelte-1tclfmr"),b(e,"class","svelte-1tclfmr"),B(e,"dragging",a[14])},m(y,g){O(y,e,g),p&&p.m(e,null),q(e,l),q(e,t),q(t,n);for(let N=0;N<r.length;N+=1)r[N]&&r[N].m(n,null);q(e,i),q(e,_);for(let N=0;N<f.length;N+=1)f[N]&&f[N].m(_,null);m=!0},p(y,g){y[1]&&y[1].length!==0?p?p.p(y,g):(p=Oe(y),p.c(),p.m(e,l)):p&&(p.d(1),p=null),g[0]&3718400&&(h=W(y[8]),X(),r=_e(r,g,A,1,y,h,c,n,de,Se,null,Be),x()),g[0]&460481&&(d=W(y[9]),X(),f=_e(f,g,C,1,y,d,o,_,de,Ce,null,Le),x()),(!m||g[0]&16384)&&B(e,"dragging",y[14])},i(y){if(!m){for(let g=0;g<h.length;g+=1)M(r[g]);for(let g=0;g<d.length;g+=1)M(f[g]);m=!0}},o(y){for(let g=0;g<r.length;g+=1)U(r[g]);for(let g=0;g<f.length;g+=1)U(f[g]);m=!1},d(y){y&&S(e),p&&p.d();for(let g=0;g<r.length;g+=1)r[g].d();for(let g=0;g<f.length;g+=1)f[g].d()}}}function Re(a){let e,l,t,n=a[3][1]==="dynamic"&&Ue(a),r=a[2][1]==="dynamic"&&ze(a);return{c(){e=T("div"),n&&n.c(),l=K(),r&&r.c(),b(e,"class","controls-wrap svelte-1tclfmr")},m(c,i){O(c,e,i),n&&n.m(e,null),q(e,l),r&&r.m(e,null),t=!0},p(c,i){c[3][1]==="dynamic"?n?(n.p(c,i),i[0]&8&&M(n,1)):(n=Ue(c),n.c(),M(n,1),n.m(e,l)):n&&(X(),U(n,1,1,()=>{n=null}),x()),c[2][1]==="dynamic"?r?(r.p(c,i),i[0]&4&&M(r,1)):(r=ze(c),r.c(),M(r,1),r.m(e,null)):r&&(X(),U(r,1,1,()=>{r=null}),x())},i(c){t||(M(n),M(r),t=!0)},o(c){U(n),U(r),t=!1},d(c){c&&S(e),n&&n.d(),r&&r.d()}}}function Ue(a){let e,l,t;return l=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[yl]},$$scope:{ctx:a}}}),l.$on("click",a[43]),{c(){e=T("span"),j(l.$$.fragment),b(e,"class","button-wrap svelte-1tclfmr")},m(n,r){O(n,e,r),G(l,e,null),t=!0},p(n,r){const c={};r[1]&1073741824&&(c.$$scope={dirty:r,ctx:n}),l.$set(c)},i(n){t||(M(l.$$.fragment,n),t=!0)},o(n){U(l.$$.fragment,n),t=!1},d(n){n&&S(e),Q(l)}}}function yl(a){let e,l,t;return{c(){e=$("svg"),l=$("path"),t=ee(`
						New row`),b(l,"fill","currentColor"),b(l,"d","M24.59 16.59L17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10l10-10l-1.41-1.41z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1tclfmr")},m(n,r){O(n,e,r),q(e,l),O(n,t,r)},p:te,d(n){n&&(S(e),S(t))}}}function ze(a){let e,l,t;return l=new He({props:{variant:"secondary",size:"sm",$$slots:{default:[vl]},$$scope:{ctx:a}}}),l.$on("click",a[23]),{c(){e=T("span"),j(l.$$.fragment),b(e,"class","button-wrap svelte-1tclfmr")},m(n,r){O(n,e,r),G(l,e,null),t=!0},p(n,r){const c={};r[1]&1073741824&&(c.$$scope={dirty:r,ctx:n}),l.$set(c)},i(n){t||(M(l.$$.fragment,n),t=!0)},o(n){U(l.$$.fragment,n),t=!1},d(n){n&&S(e),Q(l)}}}function vl(a){let e,l,t;return{c(){e=$("svg"),l=$("path"),t=ee(`
						New column`),b(l,"fill","currentColor"),b(l,"d","m18 6l-1.43 1.393L24.15 15H4v2h20.15l-7.58 7.573L18 26l10-10L18 6z"),b(e,"xmlns","http://www.w3.org/2000/svg"),b(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),b(e,"aria-hidden","true"),b(e,"role","img"),b(e,"width","1em"),b(e,"height","1em"),b(e,"preserveAspectRatio","xMidYMid meet"),b(e,"viewBox","0 0 32 32"),b(e,"class","svelte-1tclfmr")},m(n,r){O(n,e,r),q(e,l),O(n,t,r)},p:te,d(n){n&&(S(e),S(t))}}}function Al(a){let e,l,t,n,r,c,i,_,f,o=a[1]&&a[1].length!==0&&Me(a);function m(A){a[41](A)}let p={flex:!1,center:!1,boundedheight:!1,disable_click:!0,$$slots:{default:[kl]},$$scope:{ctx:a}};a[14]!==void 0&&(p.dragging=a[14]),n=new hl({props:p}),Z.push(()=>ne(n,"dragging",m)),n.$on("load",a[42]);let h=a[4]&&Re(a);return{c(){e=T("div"),o&&o.c(),l=K(),t=T("div"),j(n.$$.fragment),c=K(),h&&h.c(),b(t,"class","table-wrap scroll-hide svelte-1tclfmr"),B(t,"dragging",a[14]),B(t,"no-wrap",!a[5]),b(e,"class","svelte-1tclfmr"),B(e,"label",a[1]&&a[1].length!==0)},m(A,d){O(A,e,d),o&&o.m(e,null),q(e,l),q(e,t),G(n,t,null),q(e,c),h&&h.m(e,null),i=!0,_||(f=[I(window,"click",a[24]),I(window,"touchstart",a[24])],_=!0)},p(A,d){A[1]&&A[1].length!==0?o?o.p(A,d):(o=Me(A),o.c(),o.m(e,l)):o&&(o.d(1),o=null);const C={};d[0]&32707|d[1]&1073741824&&(C.$$scope={dirty:d,ctx:A}),!r&&d[0]&16384&&(r=!0,C.dragging=A[14],ae(()=>r=!1)),n.$set(C),(!i||d[0]&16384)&&B(t,"dragging",A[14]),(!i||d[0]&32)&&B(t,"no-wrap",!A[5]),A[4]?h?(h.p(A,d),d[0]&16&&M(h,1)):(h=Re(A),h.c(),M(h,1),h.m(e,null)):h&&(X(),U(h,1,1,()=>{h=null}),x()),(!i||d[0]&2)&&B(e,"label",A[1]&&A[1].length!==0)},i(A){i||(M(n.$$.fragment,A),M(h),i=!0)},o(A){U(n.$$.fragment,A),U(h),i=!1},d(A){A&&S(e),o&&o.d(),Q(n),h&&h.d(),_=!1,be(f)}}}function Dl(a,e){return e.filter(l);function l(t){var n=-1;return a.split(`
`).every(r);function r(c){if(!c)return!0;var i=c.split(t).length;return n<0&&(n=i),n===i&&i>1}}}function Nl(a){const e=atob(a.split(",")[1]),l=a.split(",")[0].split(":")[1].split(";")[0],t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return new Blob([t],{type:l})}function El(a,e,l){let{datatype:t}=e,{label:n=null}=e,{headers:r=[]}=e,{values:c=[[]]}=e,{col_count:i}=e,{row_count:_}=e,{editable:f=!0}=e,{wrap:o=!1}=e,m=!1;const p=Fe();let h=!1;const A=(s,u)=>v[s][u].value;let d={};function C(s){let u=s||[];if(i[1]==="fixed"&&u.length<i[0]){const k=Array(i[0]-u.length).fill("").map((D,E)=>`${E+u.length}`);u=u.concat(k)}return!u||u.length===0?Array(i[0]).fill(0).map((k,D)=>{const E=`h-${D}`;return l(10,d[E]={cell:null,input:null},d),{id:E,value:JSON.stringify(D+1)}}):u.map((k,D)=>{const E=`h-${D}`;return l(10,d[E]={cell:null,input:null},d),{id:E,value:k??""}})}function y(s){const u=s.length>0?s.length:_[0];return Array(_[1]==="fixed"||u<_[0]?_[0]:u).fill(0).map((k,D)=>Array(i[1]==="fixed"?i[0]:s[0].length).fill(0).map((E,H)=>{const Y=`${D}-${H}`;return l(10,d[Y]={input:null,cell:null},d),{value:s?.[D]?.[H]??"",id:Y}}))}let g=C(r),N;async function L(){typeof h=="string"?(await P(),d[h]?.input?.focus()):typeof m=="string"&&(await P(),d[m]?.input?.focus())}let v=[[]],R;function w(s,u,k){if(!u)return"none";if(r[u]===s){if(k==="asc")return"ascending";if(k==="des")return"descending"}}function z(s){return v.reduce((u,k,D)=>{const E=k.reduce((H,Y,ue)=>s===Y.id?ue:H,-1);return E===-1?u:[D,E]},[-1,-1])}async function J(s,u){if(!f||h===s)return;if(u){const[D,E]=z(s);l(9,v[D][E].value="",v)}l(7,h=s),await P();const{input:k}=d[s];k?.focus()}async function we(s,u,k,D){let E;switch(s.key){case"ArrowRight":if(h)break;s.preventDefault(),E=v[u][k+1],l(6,m=E?E.id:m);break;case"ArrowLeft":if(h)break;s.preventDefault(),E=v[u][k-1],l(6,m=E?E.id:m);break;case"ArrowDown":if(h)break;s.preventDefault(),E=v[u+1],l(6,m=E?E[k].id:m);break;case"ArrowUp":if(h)break;s.preventDefault(),E=v[u-1],l(6,m=E?E[k].id:m);break;case"Escape":if(!f)break;s.preventDefault(),l(6,m=h),l(7,h=!1);break;case"Enter":if(!f)break;if(s.preventDefault(),s.shiftKey){ie(u),await P();const[sl]=z(D);l(6,m=v[sl+1][k].id)}else h===D?l(7,h=!1):J(D);break;case"Backspace":if(!f)break;h||(s.preventDefault(),l(9,v[u][k].value="",v));break;case"Delete":if(!f)break;h||(s.preventDefault(),l(9,v[u][k].value="",v));break;case"Tab":let H=s.shiftKey?-1:1,Y=v[u][k+H],ue=v?.[u+H]?.[H>0?0:g.length-1],oe=Y||ue;oe&&(s.preventDefault(),l(6,m=oe?oe.id:m)),l(7,h=!1);break;default:(!h||h&&h!==D)&&s.key.length===1&&J(D,!0);break}}async function ke(s){h!==s&&m!==s&&(l(7,h=!1),l(6,m=s))}async function ye(s,u){if(u==="edit"&&typeof s=="string"&&(await P(),d[s].input?.focus()),u==="edit"&&typeof s=="boolean"&&typeof m=="string"){let k=d[m]?.cell;await P(),k?.focus()}if(u==="select"&&typeof s=="string"){const{cell:k}=d[s];await P(),k?.focus()}}let V,le;function Ie(s,u){u==="asc"?l(9,v=v.sort((k,D)=>k[s].value<D[s].value?-1:1)):u==="des"&&l(9,v=v.sort((k,D)=>k[s].value>D[s].value?-1:1))}function ve(s){typeof le!="number"||le!==s?(l(11,V="asc"),l(12,le=s)):V==="asc"?l(11,V="des"):V==="des"&&l(11,V="asc"),Ie(s,V)}let F;function Ae(){if(typeof m=="string"){const s=d[m].input?.value;if(g.find(u=>u.id===m)){let u=g.find(k=>k.id===m);s&&(u.value=s)}else s&&g.push({id:m,value:s})}}async function re(s,u){!f||i[1]!=="dynamic"||h===s||(l(13,F=s),await P(),d[s].input?.focus(),u&&d[s].input?.select())}function Ke(s){if(f)switch(s.key){case"Escape":case"Enter":case"Tab":s.preventDefault(),l(6,m=F),l(13,F=!1),Ae();break}}function ie(s){_[1]==="dynamic"&&(v.splice(s?s+1:v.length,0,Array(v[0].length).fill(0).map((u,k)=>{const D=`${v.length}-${k}`;return l(10,d[D]={cell:null,input:null},d),{id:D,value:""}})),l(9,v),l(27,c),l(29,R),l(26,r))}async function Pe(){if(i[1]!=="dynamic")return;for(let u=0;u<v.length;u++){const k=`${u}-${v[u].length}`;l(10,d[k]={cell:null,input:null},d),v[u].push({id:k,value:""})}const s=`h-${g.length}`;l(10,d[s]={cell:null,input:null},d),g.push({id:s,value:`Header ${g.length+1}`}),l(9,v),l(27,c),l(29,R),l(26,r),l(8,g),l(26,r),l(28,N),l(27,c),await P(),re(s,!0)}function Ye(s){typeof h=="string"&&d[h]&&d[h].cell!==s.target&&!d[h].cell?.contains(s?.target)&&l(7,h=!1),typeof F=="string"&&d[F]&&d[F].cell!==s.target&&!d[F].cell?.contains(s.target)&&(l(6,m=F),l(13,F=!1),Ae(),l(13,F=!1))}function De(s){const u=new FileReader;function k(D){if(!D?.target?.result||typeof D.target.result!="string")return;const[E]=Dl(D.target.result,[",","	"]),[H,...Y]=gl(E).parseRows(D.target.result);l(8,g=C(i[1]==="fixed"?H.slice(0,i[0]):H)),l(27,c=Y),u.removeEventListener("loadend",k)}u.addEventListener("loadend",k),u.readAsText(s)}let fe=!1;function je(s,u){a.$$.not_equal(d[u].input,s)&&(d[u].input=s,l(10,d))}const Ge=s=>re(s),Qe=s=>ve(s);function Ve(s,u){Z[s?"unshift":"push"](()=>{d[u].cell=s,l(10,d)})}function Ze(s,u,k,D){k[D].value=s,l(9,v),l(27,c),l(29,R),l(26,r)}function We(s,u){a.$$.not_equal(d[u].input,s)&&(d[u].input=s,l(10,d))}function Xe(s,u){Z[s?"unshift":"push"](()=>{d[u].cell=s,l(10,d)})}const xe=s=>J(s),$e=s=>ke(s),el=s=>J(s),ll=(s,u,k,D)=>we(D,s,u,k);function tl(s){fe=s,l(14,fe)}const nl=s=>De(Nl(s.detail.data)),al=()=>ie();return a.$$set=s=>{"datatype"in s&&l(0,t=s.datatype),"label"in s&&l(1,n=s.label),"headers"in s&&l(26,r=s.headers),"values"in s&&l(27,c=s.values),"col_count"in s&&l(2,i=s.col_count),"row_count"in s&&l(3,_=s.row_count),"editable"in s&&l(4,f=s.editable),"wrap"in s&&l(5,o=s.wrap)},a.$$.update=()=>{if(a.$$.dirty[0]&201326592&&(c&&!Array.isArray(c)?(l(26,r=c.headers),l(27,c=c.data.length===0?[Array(r.length).fill("")]:c.data),l(6,m=!1)):c===null&&(l(27,c=[Array(r.length).fill("")]),l(6,m=!1))),a.$$.dirty[0]&64&&m!==!1){const s=m.split("-"),u=parseInt(s[0]),k=parseInt(s[1]);!isNaN(u)&&!isNaN(k)&&p("select",{index:[u,k],value:A(u,k)})}a.$$.dirty[0]&335544320&&(se(r,N)||(l(8,g=C(r)),l(28,N=r),L())),a.$$.dirty[0]&671088640&&(se(c,R)||(l(9,v=y(c)),l(29,R=c),L())),a.$$.dirty[0]&768&&g&&p("change",{data:v.map(s=>s.map(({value:u})=>u)),headers:g.map(s=>s.value)}),a.$$.dirty[0]&128&&ye(h,"edit"),a.$$.dirty[0]&64&&ye(m,"select")},[t,n,i,_,f,o,m,h,g,v,d,V,le,F,fe,w,J,we,ke,ve,re,Ke,ie,Pe,Ye,De,r,c,N,R,je,Ge,Qe,Ve,Ze,We,Xe,xe,$e,el,ll,tl,nl,al]}class Ll extends he{constructor(e){super(),ge(this,e,El,Al,me,{datatype:0,label:1,headers:26,values:27,col_count:2,row_count:3,editable:4,wrap:5},null,[-1,-1])}}function ql(a){let e,l,t,n;const r=[a[13]];let c={};for(let i=0;i<r.length;i+=1)c=ul(c,r[i]);return e=new ol({props:c}),t=new Ll({props:{label:a[8],row_count:a[7],col_count:a[6],values:a[0],headers:a[1],editable:a[5]==="dynamic",wrap:a[9],datatype:a[10]}}),t.$on("change",a[16]),t.$on("select",a[17]),{c(){j(e.$$.fragment),l=K(),j(t.$$.fragment)},m(i,_){G(e,i,_),O(i,l,_),G(t,i,_),n=!0},p(i,_){const f=_&8192?cl(r,[_l(i[13])]):{};e.$set(f);const o={};_&256&&(o.label=i[8]),_&128&&(o.row_count=i[7]),_&64&&(o.col_count=i[6]),_&1&&(o.values=i[0]),_&2&&(o.headers=i[1]),_&32&&(o.editable=i[5]==="dynamic"),_&512&&(o.wrap=i[9]),_&1024&&(o.datatype=i[10]),t.$set(o)},i(i){n||(M(e.$$.fragment,i),M(t.$$.fragment,i),n=!0)},o(i){U(e.$$.fragment,i),U(t.$$.fragment,i),n=!1},d(i){i&&S(l),Q(e,i),Q(t,i)}}}function Bl(a){let e,l;return e=new dl({props:{visible:a[4],padding:!1,elem_id:a[2],elem_classes:a[3],container:!1,scale:a[11],min_width:a[12],allow_overflow:!1,$$slots:{default:[ql]},$$scope:{ctx:a}}}),{c(){j(e.$$.fragment)},m(t,n){G(e,t,n),l=!0},p(t,[n]){const r={};n&16&&(r.visible=t[4]),n&4&&(r.elem_id=t[2]),n&8&&(r.elem_classes=t[3]),n&2048&&(r.scale=t[11]),n&4096&&(r.min_width=t[12]),n&1058787&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(M(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function Ml(a,e,l){let{headers:t=[]}=e,{elem_id:n=""}=e,{elem_classes:r=[]}=e,{visible:c=!0}=e,{value:i={data:[["","",""]],headers:["1","2","3"]}}=e,_=JSON.stringify(i),{value_is_output:f=!1}=e,{mode:o}=e,{col_count:m}=e,{row_count:p}=e,{label:h=null}=e,{wrap:A}=e,{datatype:d}=e,{scale:C=null}=e,{min_width:y=void 0}=e;const g=Fe();let{loading_status:N}=e;function L(){g("change",i),f||g("input")}fl(()=>{l(14,f=!1)});const v=({detail:w})=>{l(0,i=w)};function R(w){ce.call(this,a,w)}return a.$$set=w=>{"headers"in w&&l(1,t=w.headers),"elem_id"in w&&l(2,n=w.elem_id),"elem_classes"in w&&l(3,r=w.elem_classes),"visible"in w&&l(4,c=w.visible),"value"in w&&l(0,i=w.value),"value_is_output"in w&&l(14,f=w.value_is_output),"mode"in w&&l(5,o=w.mode),"col_count"in w&&l(6,m=w.col_count),"row_count"in w&&l(7,p=w.row_count),"label"in w&&l(8,h=w.label),"wrap"in w&&l(9,A=w.wrap),"datatype"in w&&l(10,d=w.datatype),"scale"in w&&l(11,C=w.scale),"min_width"in w&&l(12,y=w.min_width),"loading_status"in w&&l(13,N=w.loading_status)},a.$$.update=()=>{a.$$.dirty&32769&&JSON.stringify(i)!==_&&(l(15,_=JSON.stringify(i)),L())},[i,t,n,r,c,o,m,p,h,A,d,C,y,N,f,_,v,R]}class Ol extends he{constructor(e){super(),ge(this,e,Ml,Bl,me,{headers:1,elem_id:2,elem_classes:3,visible:4,value:0,value_is_output:14,mode:5,col_count:6,row_count:7,label:8,wrap:9,datatype:10,scale:11,min_width:12,loading_status:13})}}const zl=Ol,Fl=["static","dynamic"],Hl=a=>({type:{payload:"{ data: Array<Array<string | number>>; headers: Array<string> }"},description:{payload:"an object with an array of data and an array of headers"},example_data:a.value});export{zl as Component,Hl as document,Fl as modes};
//# sourceMappingURL=index-c27610fd.js.map
