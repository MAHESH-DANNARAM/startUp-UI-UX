import{S as q,e as D,s as G,G as Y,N,K as y,p as z,M as B,n as C,A as U,V as me,B as J,P as R,O,U as Z,Q as be,R as x,k as A,m as K,o as p,u as L,v as g,y as Q,z as h,x as v,F as P,a7 as de,h as ge,j as he,t as we,a9 as ke,ab as Ae,ac as pe,ad as ve,at as ye,au as Fe,E as Be,ae as ze,q as Ue,r as je}from"./index-f877dfd5.js";import{B as Ee}from"./Button-11a87b79.js";import{B as ae}from"./BlockLabel-7929e88d.js";import{E as Ne}from"./Empty-2159e5e9.js";import{F as V}from"./File-69f43e15.js";import{U as Oe}from"./Upload-3aa22eef.js";import{M as Se}from"./ModifyUpload-87f877d6.js";import{n as $,b as Te}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{U as Me}from"./UploadText-8aae32a4.js";import"./Blocks-adc2d4ca.js";import"./IconButton-34da90d2.js";const Pe=t=>{let l=["B","KB","MB","GB","PB"],n=0;for(;t>1024;)t/=1024,n++;let e=l[n];return t.toFixed(1)+" "+e},ee=t=>{var l;return l=t.orig_name||t.name,l.length>30?`${l.substr(0,30)}...`:l},le=t=>{var l=0;if(Array.isArray(t))for(var n of t)n.size!==void 0&&(l+=n.size);else l=t.size||0;return Pe(l)};function te(t,l,n){const e=t.slice();return e[4]=l[n],e[6]=n,e}function Ce(t){let l;return{c(){l=R("Uploading...")},m(n,e){z(n,l,e)},p:C,d(n){n&&U(l)}}}function Re(t){let l,n,e,a;return{c(){l=N("a"),n=R("Download"),y(l,"href",e=t[4].data),y(l,"target","_blank"),y(l,"download",a=window.__is_colab__?null:t[4].orig_name||t[4].name),y(l,"class","svelte-xrr240")},m(s,i){z(s,l,i),B(l,n)},p(s,i){i&1&&e!==(e=s[4].data)&&y(l,"href",e),i&1&&a!==(a=window.__is_colab__?null:s[4].orig_name||s[4].name)&&y(l,"download",a)},d(s){s&&U(l)}}}function ne(t){let l,n,e=ee(t[4])+"",a,s,i,o=le(t[4])+"",f,d,r,m,_,b;function F(c,j){return c[4].data?Re:Ce}let w=F(t),k=w(t);function S(){return t[3](t[4],t[6])}return{c(){l=N("tr"),n=N("td"),a=R(e),s=O(),i=N("td"),f=R(o),d=O(),r=N("td"),k.c(),m=O(),y(n,"class","svelte-xrr240"),y(i,"class","svelte-xrr240"),y(r,"class","download svelte-xrr240"),y(l,"class","file svelte-xrr240"),Z(l,"selectable",t[1])},m(c,j){z(c,l,j),B(l,n),B(n,a),B(l,s),B(l,i),B(i,f),B(l,d),B(l,r),k.m(r,null),B(l,m),_||(b=be(l,"click",S),_=!0)},p(c,j){t=c,j&1&&e!==(e=ee(t[4])+"")&&x(a,e),j&1&&o!==(o=le(t[4])+"")&&x(f,o),w===(w=F(t))&&k?k.p(t,j):(k.d(1),k=w(t),k&&(k.c(),k.m(r,null))),j&2&&Z(l,"selectable",t[1])},d(c){c&&U(l),k.d(),_=!1,b()}}}function qe(t){let l,n,e,a=Y(Array.isArray(t[0])?t[0]:[t[0]]),s=[];for(let i=0;i<a.length;i+=1)s[i]=ne(te(t,a,i));return{c(){l=N("div"),n=N("table"),e=N("tbody");for(let i=0;i<s.length;i+=1)s[i].c();y(n,"class","file-preview svelte-xrr240"),y(l,"class","file-preview-holder svelte-xrr240")},m(i,o){z(i,l,o),B(l,n),B(n,e);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null)},p(i,[o]){if(o&7){a=Y(Array.isArray(i[0])?i[0]:[i[0]]);let f;for(f=0;f<a.length;f+=1){const d=te(i,a,f);s[f]?s[f].p(d,o):(s[f]=ne(d),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=a.length}},i:C,o:C,d(i){i&&U(l),me(s,i)}}}function De(t,l,n){const e=J();let{value:a}=l,{selectable:s=!1}=l;const i=(o,f)=>e("select",{value:o.orig_name||o.name,index:f});return t.$$set=o=>{"value"in o&&n(0,a=o.value),"selectable"in o&&n(1,s=o.selectable)},[a,s,e,i]}class se extends q{constructor(l){super(),D(this,l,De,qe,G,{value:0,selectable:1})}}function Ge(t){let l,n;return l=new Ne({props:{unpadded_box:!0,size:"large",$$slots:{default:[Je]},$$scope:{ctx:t}}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&32&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Ie(t){let l,n;return l=new se({props:{selectable:t[3],value:t[0]}}),l.$on("select",t[4]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&8&&(s.selectable=e[3]),a&1&&(s.value=e[0]),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Je(t){let l,n;return l=new V({}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function Ke(t){let l,n,e,a,s,i;l=new ae({props:{show_label:t[2],float:t[0]===null,Icon:V,label:t[1]||"File"}});const o=[Ie,Ge],f=[];function d(r,m){return r[0]?0:1}return e=d(t),a=f[e]=o[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(r,m){p(l,r,m),z(r,n,m),f[e].m(r,m),z(r,s,m),i=!0},p(r,[m]){const _={};m&4&&(_.show_label=r[2]),m&1&&(_.float=r[0]===null),m&2&&(_.label=r[1]||"File"),l.$set(_);let b=e;e=d(r),e===b?f[e].p(r,m):(L(),g(f[b],1,1,()=>{f[b]=null}),Q(),a=f[e],a?a.p(r,m):(a=f[e]=o[e](r),a.c()),h(a,1),a.m(s.parentNode,s))},i(r){i||(h(l.$$.fragment,r),h(a),i=!0)},o(r){g(l.$$.fragment,r),g(a),i=!1},d(r){r&&(U(n),U(s)),v(l,r),f[e].d(r)}}}function Le(t,l,n){let{value:e=null}=l,{label:a}=l,{show_label:s=!0}=l,{selectable:i=!1}=l;function o(f){P.call(this,t,f)}return t.$$set=f=>{"value"in f&&n(0,e=f.value),"label"in f&&n(1,a=f.label),"show_label"in f&&n(2,s=f.show_label),"selectable"in f&&n(3,i=f.selectable)},[e,a,s,i,o]}class Qe extends q{constructor(l){super(),D(this,l,Le,Ke,G,{value:0,label:1,show_label:2,selectable:3})}}function Ve(t){let l,n,e;function a(i){t[12](i)}let s={filetype:t[6],parse_to_data_url:!1,file_count:t[3],$$slots:{default:[He]},$$scope:{ctx:t}};return t[5]!==void 0&&(s.dragging=t[5]),l=new Oe({props:s}),ge.push(()=>he(l,"dragging",a)),l.$on("load",t[7]),{c(){A(l.$$.fragment)},m(i,o){p(l,i,o),e=!0},p(i,o){const f={};o&64&&(f.filetype=i[6]),o&8&&(f.file_count=i[3]),o&8192&&(f.$$scope={dirty:o,ctx:i}),!n&&o&32&&(n=!0,f.dragging=i[5],we(()=>n=!1)),l.$set(f)},i(i){e||(h(l.$$.fragment,i),e=!0)},o(i){g(l.$$.fragment,i),e=!1},d(i){v(l,i)}}}function We(t){let l,n,e,a;return l=new Se({props:{absolute:!0}}),l.$on("clear",t[8]),e=new se({props:{selectable:t[4],value:t[0]}}),e.$on("select",t[11]),{c(){A(l.$$.fragment),n=O(),A(e.$$.fragment)},m(s,i){p(l,s,i),z(s,n,i),p(e,s,i),a=!0},p(s,i){const o={};i&16&&(o.selectable=s[4]),i&1&&(o.value=s[0]),e.$set(o)},i(s){a||(h(l.$$.fragment,s),h(e.$$.fragment,s),a=!0)},o(s){g(l.$$.fragment,s),g(e.$$.fragment,s),a=!1},d(s){s&&U(n),v(l,s),v(e,s)}}}function He(t){let l;const n=t[10].default,e=ke(n,t,t[13],null);return{c(){e&&e.c()},m(a,s){e&&e.m(a,s),l=!0},p(a,s){e&&e.p&&(!l||s&8192)&&Ae(e,n,a,a[13],l?ve(n,a[13],s,null):pe(a[13]),null)},i(a){l||(h(e,a),l=!0)},o(a){g(e,a),l=!1},d(a){e&&e.d(a)}}}function Xe(t){let l,n,e,a,s,i;l=new ae({props:{show_label:t[2],Icon:V,float:t[0]===null,label:t[1]||"File"}});const o=[We,Ve],f=[];function d(r,m){return r[0]?0:1}return e=d(t),a=f[e]=o[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(r,m){p(l,r,m),z(r,n,m),f[e].m(r,m),z(r,s,m),i=!0},p(r,[m]){const _={};m&4&&(_.show_label=r[2]),m&1&&(_.float=r[0]===null),m&2&&(_.label=r[1]||"File"),l.$set(_);let b=e;e=d(r),e===b?f[e].p(r,m):(L(),g(f[b],1,1,()=>{f[b]=null}),Q(),a=f[e],a?a.p(r,m):(a=f[e]=o[e](r),a.c()),h(a,1),a.m(s.parentNode,s))},i(r){i||(h(l.$$.fragment,r),h(a),i=!0)},o(r){g(l.$$.fragment,r),g(a),i=!1},d(r){r&&(U(n),U(s)),v(l,r),f[e].d(r)}}}function Ye(t,l,n){let{$$slots:e={},$$scope:a}=l,{value:s}=l,{label:i}=l,{show_label:o=!0}=l,{file_count:f="single"}=l,{file_types:d=null}=l,{selectable:r=!1}=l;async function m({detail:c}){n(0,s=c),await de(),b("change",s),b("upload",c)}function _({detail:c}){n(0,s=null),b("change",s),b("clear")}const b=J();let F;d==null?F=null:(d=d.map(c=>c.startsWith(".")?c:c+"/*"),F=d.join(", "));let w=!1;function k(c){P.call(this,t,c)}function S(c){w=c,n(5,w)}return t.$$set=c=>{"value"in c&&n(0,s=c.value),"label"in c&&n(1,i=c.label),"show_label"in c&&n(2,o=c.show_label),"file_count"in c&&n(3,f=c.file_count),"file_types"in c&&n(9,d=c.file_types),"selectable"in c&&n(4,r=c.selectable),"$$scope"in c&&n(13,a=c.$$scope)},t.$$.update=()=>{t.$$.dirty&32&&b("drag",w)},[s,i,o,f,r,w,F,m,_,d,e,k,S,a]}class Ze extends q{constructor(l){super(),D(this,l,Ye,Xe,G,{value:0,label:1,show_label:2,file_count:3,file_types:9,selectable:4})}}function xe(t){let l,n;return l=new Qe({props:{selectable:t[9],value:t[14],label:t[5],show_label:t[6]}}),l.$on("select",t[24]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&512&&(s.selectable=e[9]),a&16384&&(s.value=e[14]),a&32&&(s.label=e[5]),a&64&&(s.show_label=e[6]),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function $e(t){let l,n;return l=new Ze({props:{label:t[5],show_label:t[6],value:t[14],file_count:t[7],file_types:t[8],selectable:t[9],$$slots:{default:[el]},$$scope:{ctx:t}}}),l.$on("change",t[20]),l.$on("drag",t[21]),l.$on("clear",t[22]),l.$on("select",t[23]),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,a){const s={};a&32&&(s.label=e[5]),a&64&&(s.show_label=e[6]),a&16384&&(s.value=e[14]),a&128&&(s.file_count=e[7]),a&256&&(s.file_types=e[8]),a&512&&(s.selectable=e[9]),a&134217728&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function el(t){let l,n;return l=new Me({props:{type:"file"}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p:C,i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function ll(t){let l,n,e,a,s,i;const o=[t[10],{status:t[16]?"generating":t[10]?.status||"complete"}];let f={};for(let _=0;_<o.length;_+=1)f=Be(f,o[_]);l=new ze({props:f});const d=[$e,xe],r=[];function m(_,b){return _[4]==="dynamic"?0:1}return e=m(t),a=r[e]=d[e](t),{c(){A(l.$$.fragment),n=O(),a.c(),s=K()},m(_,b){p(l,_,b),z(_,n,b),r[e].m(_,b),z(_,s,b),i=!0},p(_,b){const F=b&66560?Ue(o,[b&1024&&je(_[10]),{status:_[16]?"generating":_[10]?.status||"complete"}]):{};l.$set(F);let w=e;e=m(_),e===w?r[e].p(_,b):(L(),g(r[w],1,1,()=>{r[w]=null}),Q(),a=r[e],a?a.p(_,b):(a=r[e]=d[e](_),a.c()),h(a,1),a.m(s.parentNode,s))},i(_){i||(h(l.$$.fragment,_),h(a),i=!0)},o(_){g(l.$$.fragment,_),g(a),i=!1},d(_){_&&(U(n),U(s)),v(l,_),r[e].d(_)}}}function tl(t){let l,n;return l=new Ee({props:{visible:t[3],variant:t[4]==="dynamic"&&t[0]===null?"dashed":"solid",border_mode:t[15]?"focus":"base",padding:!1,elem_id:t[1],elem_classes:t[2],container:t[11],scale:t[12],min_width:t[13],$$slots:{default:[ll]},$$scope:{ctx:t}}}),{c(){A(l.$$.fragment)},m(e,a){p(l,e,a),n=!0},p(e,[a]){const s={};a&8&&(s.visible=e[3]),a&17&&(s.variant=e[4]==="dynamic"&&e[0]===null?"dashed":"solid"),a&32768&&(s.border_mode=e[15]?"focus":"base"),a&2&&(s.elem_id=e[1]),a&4&&(s.elem_classes=e[2]),a&2048&&(s.container=e[11]),a&4096&&(s.scale=e[12]),a&8192&&(s.min_width=e[13]),a&134334449&&(s.$$scope={dirty:a,ctx:e}),l.$set(s)},i(e){n||(h(l.$$.fragment,e),n=!0)},o(e){g(l.$$.fragment,e),n=!1},d(e){v(l,e)}}}function nl(t,l,n){let e,{elem_id:a=""}=l,{elem_classes:s=[]}=l,{visible:i=!0}=l,{value:o}=l,f,{mode:d}=l,{root:r}=l,{label:m}=l,{show_label:_}=l,{file_count:b}=l,{file_types:F=["file"]}=l,{root_url:w}=l,{selectable:k=!1}=l,{loading_status:S}=l,{container:c=!1}=l,{scale:j=null}=l,{min_width:W=void 0}=l;const ie=ye("upload_files")??Fe;let H=!1,T=!1;const I=J(),fe=({detail:u})=>n(0,o=u),re=({detail:u})=>n(15,H=u);function oe(u){P.call(this,t,u)}function ue(u){P.call(this,t,u)}function _e(u){P.call(this,t,u)}return t.$$set=u=>{"elem_id"in u&&n(1,a=u.elem_id),"elem_classes"in u&&n(2,s=u.elem_classes),"visible"in u&&n(3,i=u.visible),"value"in u&&n(0,o=u.value),"mode"in u&&n(4,d=u.mode),"root"in u&&n(17,r=u.root),"label"in u&&n(5,m=u.label),"show_label"in u&&n(6,_=u.show_label),"file_count"in u&&n(7,b=u.file_count),"file_types"in u&&n(8,F=u.file_types),"root_url"in u&&n(18,w=u.root_url),"selectable"in u&&n(9,k=u.selectable),"loading_status"in u&&n(10,S=u.loading_status),"container"in u&&n(11,c=u.container),"scale"in u&&n(12,j=u.scale),"min_width"in u&&n(13,W=u.min_width)},t.$$.update=()=>{if(t.$$.dirty&393217&&n(14,e=$(o,r,w)),t.$$.dirty&933905&&JSON.stringify(e)!==JSON.stringify(f)){if(n(19,f=e),e===null)I("change"),n(16,T=!1);else if(!(Array.isArray(e)?e:[e]).every(u=>u.blob))n(16,T=!1);else if(d==="dynamic"){let u=(Array.isArray(e)?e:[e]).map(M=>M.blob),ce=e;n(16,T=!0),ie(r,u).then(M=>{ce===e&&(n(16,T=!1),M.error?(Array.isArray(e)?e:[e]).forEach(async(E,X)=>{E.data=await Te(E.blob),E.blob=void 0}):((Array.isArray(e)?e:[e]).forEach((E,X)=>{M.files&&(E.orig_name=E.name,E.name=M.files[X],E.is_file=!0,E.blob=void 0)}),n(19,f=n(14,e=$(o,r,w)))),I("change"),I("upload"))})}}},[o,a,s,i,d,m,_,b,F,k,S,c,j,W,e,H,T,r,w,f,fe,re,oe,ue,_e]}class al extends q{constructor(l){super(),D(this,l,nl,tl,G,{elem_id:1,elem_classes:2,visible:3,value:0,mode:4,root:17,label:5,show_label:6,file_count:7,file_types:8,root_url:18,selectable:9,loading_status:10,container:11,scale:12,min_width:13})}}const gl=al,hl=["static","dynamic"],wl=t=>({type:{input_payload:"{ name: string; data: string }",response_object:"{ orig_name: string; name: string, size: number, data: string, is_file: boolean}"},description:{input_payload:"object with file name and base64 data",response_object:"object that includes path to file. The URL: {ROOT}file={name} contains the data"},example_data:{name:"zip.zip",data:"data:@file/octet-stream;base64,UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA=="}});export{gl as Component,wl as document,hl as modes};
//# sourceMappingURL=index-a1cf959d.js.map
