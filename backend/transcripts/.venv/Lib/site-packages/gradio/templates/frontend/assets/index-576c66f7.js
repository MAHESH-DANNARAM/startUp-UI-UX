import{S as ce,e as he,s as me,Z as ge,O as R,m as Ne,p as D,Q as K,z as y,u as O,v as B,y as Q,A as L,B as Re,k as T,o as q,x as H,a7 as Te,h as ee,F as V,G as Z,N as S,K as b,U as N,M as G,ar as qe,V as we,T as P,L as le,a1 as He,P as be,R as de,E as Ie,ae as Me,q as Fe,r as Pe}from"./index-1a7ceb13.js";import{B as Ue}from"./Button-9ec32778.js";import{B as Ve}from"./BlockLabel-be814944.js";import{E as Ke}from"./Empty-48fd1ff5.js";import{u as Oe,S as Qe}from"./ShareButton-19078652.js";import{n as te}from"./ModifyUpload.svelte_svelte_type_style_lang-d2acacf0.js";import{M as Ze}from"./ModifyUpload-8c29caf5.js";import{I as ke}from"./Image-530006b3.js";import"./IconButton-a2220c08.js";const Je=async l=>l?`<div style="display: flex; flex-wrap: wrap; gap: 16px">${(await Promise.all(l.map(async([e,i])=>e===null?"":await Oe(e.data,"url")))).map(e=>`<img src="${e}" style="height: 400px" />`).join("")}</div>`:"";function ie(l,t,e){const i=l.slice();return i[39]=t[e][0],i[40]=t[e][1],i[42]=e,i}function ne(l,t,e){const i=l.slice();return i[39]=t[e],i[43]=t,i[42]=e,i}function re(l){let t,e;return t=new Ve({props:{show_label:l[1],Icon:ke,label:l[2]||"Gallery",disable:l[0]===!1}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,n){const s={};n[0]&2&&(s.show_label=i[1]),n[0]&4&&(s.label=i[2]||"Gallery"),n[0]&1&&(s.disable=i[0]===!1),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function We(l){let t,e,i,n,s,d,o,a=l[9]!==null&&l[5]&&ae(l),u=l[7]&&fe(l),f=Z(l[8]),m=[];for(let r=0;r<f.length;r+=1)m[r]=ue(ie(l,f,r));return{c(){a&&a.c(),t=R(),e=S("div"),i=S("div"),u&&u.c(),n=R();for(let r=0;r<m.length;r+=1)m[r].c();b(i,"class","grid-container svelte-w0jac3"),b(i,"style",s=l[14]+" "+l[15]+" --object-fit: "+l[6]+"; height: "+l[4]),N(i,"pt-6",l[1]),b(e,"class","grid-wrap svelte-w0jac3"),ge(()=>l[35].call(e)),N(e,"fixed-height",!l[4]||l[4]=="auto")},m(r,w){a&&a.m(r,w),D(r,t,w),D(r,e,w),G(e,i),u&&u.m(i,null),G(i,n);for(let c=0;c<m.length;c+=1)m[c]&&m[c].m(i,null);d=qe(e,l[35].bind(e)),o=!0},p(r,w){if(r[9]!==null&&r[5]?a?(a.p(r,w),w[0]&544&&y(a,1)):(a=ae(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(O(),B(a,1,1,()=>{a=null}),Q()),r[7]?u?(u.p(r,w),w[0]&128&&y(u,1)):(u=fe(r),u.c(),y(u,1),u.m(i,n)):u&&(O(),B(u,1,1,()=>{u=null}),Q()),w[0]&768){f=Z(r[8]);let c;for(c=0;c<f.length;c+=1){const A=ie(r,f,c);m[c]?m[c].p(A,w):(m[c]=ue(A),m[c].c(),m[c].m(i,null))}for(;c<m.length;c+=1)m[c].d(1);m.length=f.length}(!o||w[0]&49232&&s!==(s=r[14]+" "+r[15]+" --object-fit: "+r[6]+"; height: "+r[4]))&&b(i,"style",s),(!o||w[0]&2)&&N(i,"pt-6",r[1]),(!o||w[0]&16)&&N(e,"fixed-height",!r[4]||r[4]=="auto")},i(r){o||(y(a),y(u),o=!0)},o(r){B(a),B(u),o=!1},d(r){r&&(L(t),L(e)),a&&a.d(r),u&&u.d(),we(m,r),d()}}}function Xe(l){let t,e;return t=new Ke({props:{unpadded_box:!0,size:"large",$$slots:{default:[Ye]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,n){const s={};n[1]&8192&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function ae(l){let t,e,i,n,s,d,o,a,u,f,m,r,w;e=new Ze({}),e.$on("clear",l[27]);let c=l[8][l[9]][1]&&se(l),A=Z(l[8]),j=[];for(let g=0;g<A.length;g+=1)j[g]=oe(ne(l,A,g));return{c(){t=S("div"),T(e.$$.fragment),i=R(),n=S("img"),a=R(),c&&c.c(),u=R(),f=S("div");for(let g=0;g<j.length;g+=1)j[g].c();b(n,"data-testid","detailed-image"),P(n.src,s=l[8][l[9]][0].data)||b(n,"src",s),b(n,"alt",d=l[8][l[9]][1]||""),b(n,"title",o=l[8][l[9]][1]||null),le(n,"height","calc(100% - "+(l[8][l[9]][1]?"80px":"60px")+")"),b(n,"class","svelte-w0jac3"),N(n,"with-caption",!!l[8][l[9]][1]),b(f,"class","thumbnails scroll-hide svelte-w0jac3"),b(f,"data-testid","container_el"),b(t,"class","preview svelte-w0jac3")},m(g,z){D(g,t,z),q(e,t,null),G(t,i),G(t,n),G(t,a),c&&c.m(t,null),G(t,u),G(t,f);for(let k=0;k<j.length;k+=1)j[k]&&j[k].m(f,null);l[31](f),m=!0,r||(w=[K(n,"click",l[28]),K(t,"keydown",l[17])],r=!0)},p(g,z){if((!m||z[0]&768&&!P(n.src,s=g[8][g[9]][0].data))&&b(n,"src",s),(!m||z[0]&768&&d!==(d=g[8][g[9]][1]||""))&&b(n,"alt",d),(!m||z[0]&768&&o!==(o=g[8][g[9]][1]||null))&&b(n,"title",o),(!m||z[0]&768)&&le(n,"height","calc(100% - "+(g[8][g[9]][1]?"80px":"60px")+")"),(!m||z[0]&768)&&N(n,"with-caption",!!g[8][g[9]][1]),g[8][g[9]][1]?c?c.p(g,z):(c=se(g),c.c(),c.m(t,u)):c&&(c.d(1),c=null),z[0]&1792){A=Z(g[8]);let k;for(k=0;k<A.length;k+=1){const E=ne(g,A,k);j[k]?j[k].p(E,z):(j[k]=oe(E),j[k].c(),j[k].m(f,null))}for(;k<j.length;k+=1)j[k].d(1);j.length=A.length}},i(g){m||(y(e.$$.fragment,g),m=!0)},o(g){B(e.$$.fragment,g),m=!1},d(g){g&&L(t),H(e),c&&c.d(),we(j,g),l[31](null),r=!1,He(w)}}}function se(l){let t,e=l[8][l[9]][1]+"",i;return{c(){t=S("div"),i=be(e),b(t,"class","caption svelte-w0jac3")},m(n,s){D(n,t,s),G(t,i)},p(n,s){s[0]&768&&e!==(e=n[8][n[9]][1]+"")&&de(i,e)},d(n){n&&L(t)}}}function oe(l){let t,e,i,n,s,d,o=l[42],a,u;const f=()=>l[29](t,o),m=()=>l[29](null,o);function r(){return l[30](l[42])}return{c(){t=S("button"),e=S("img"),d=R(),P(e.src,i=l[39][0].data)||b(e,"src",i),b(e,"title",n=l[39][1]||null),b(e,"alt",s=l[39][1]||null),b(e,"class","svelte-w0jac3"),b(t,"class","thumbnail-item thumbnail-small svelte-w0jac3"),N(t,"selected",l[9]===l[42])},m(w,c){D(w,t,c),G(t,e),G(t,d),f(),a||(u=K(t,"click",r),a=!0)},p(w,c){l=w,c[0]&256&&!P(e.src,i=l[39][0].data)&&b(e,"src",i),c[0]&256&&n!==(n=l[39][1]||null)&&b(e,"title",n),c[0]&256&&s!==(s=l[39][1]||null)&&b(e,"alt",s),o!==l[42]&&(m(),o=l[42],f()),c[0]&512&&N(t,"selected",l[9]===l[42])},d(w){w&&L(t),m(),a=!1,u()}}}function fe(l){let t,e,i;return e=new Qe({props:{value:l[8],formatter:Je}}),e.$on("share",l[32]),e.$on("error",l[33]),{c(){t=S("div"),T(e.$$.fragment),b(t,"class","icon-button svelte-w0jac3")},m(n,s){D(n,t,s),q(e,t,null),i=!0},p(n,s){const d={};s[0]&256&&(d.value=n[8]),e.$set(d)},i(n){i||(y(e.$$.fragment,n),i=!0)},o(n){B(e.$$.fragment,n),i=!1},d(n){n&&L(t),H(e)}}}function _e(l){let t,e=l[40]+"",i;return{c(){t=S("div"),i=be(e),b(t,"class","caption-label svelte-w0jac3")},m(n,s){D(n,t,s),G(t,i)},p(n,s){s[0]&256&&e!==(e=n[40]+"")&&de(i,e)},d(n){n&&L(t)}}}function ue(l){let t,e,i,n,s,d,o,a,u=l[40]&&_e(l);function f(){return l[34](l[42])}return{c(){t=S("button"),e=S("img"),s=R(),u&&u.c(),d=R(),b(e,"alt",i=l[40]||""),P(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)||b(e,"src",n),b(e,"class","svelte-w0jac3"),b(t,"class","thumbnail-item thumbnail-lg svelte-w0jac3"),N(t,"selected",l[9]===l[42])},m(m,r){D(m,t,r),G(t,e),G(t,s),u&&u.m(t,null),G(t,d),o||(a=K(t,"click",f),o=!0)},p(m,r){l=m,r[0]&256&&i!==(i=l[40]||"")&&b(e,"alt",i),r[0]&256&&!P(e.src,n=typeof l[39]=="string"?l[39]:l[39].data)&&b(e,"src",n),l[40]?u?u.p(l,r):(u=_e(l),u.c(),u.m(t,d)):u&&(u.d(1),u=null),r[0]&512&&N(t,"selected",l[9]===l[42])},d(m){m&&L(t),u&&u.d(),o=!1,a()}}}function Ye(l){let t,e;return t=new ke({}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function pe(l){let t,e,i,n,s,d,o;ge(l[26]);let a=l[1]&&re(l);const u=[Xe,We],f=[];function m(r,w){return r[3]===null||r[8]===null||r[8].length===0?0:1}return e=m(l),i=f[e]=u[e](l),{c(){a&&a.c(),t=R(),i.c(),n=Ne()},m(r,w){a&&a.m(r,w),D(r,t,w),f[e].m(r,w),D(r,n,w),s=!0,d||(o=K(window,"resize",l[26]),d=!0)},p(r,w){r[1]?a?(a.p(r,w),w[0]&2&&y(a,1)):(a=re(r),a.c(),y(a,1),a.m(t.parentNode,t)):a&&(O(),B(a,1,1,()=>{a=null}),Q());let c=e;e=m(r),e===c?f[e].p(r,w):(O(),B(f[c],1,1,()=>{f[c]=null}),Q(),i=f[e],i?i.p(r,w):(i=f[e]=u[e](r),i.c()),y(i,1),i.m(n.parentNode,n))},i(r){s||(y(a),y(i),s=!0)},o(r){B(a),B(i),s=!1},d(r){r&&(L(t),L(n)),a&&a.d(r),f[e].d(r),d=!1,o()}}}function xe(l,t,e){let i,n,{container:s=!0}=t,{show_label:d=!0}=t,{label:o}=t,{root:a=""}=t,{root_url:u=null}=t,{value:f=null}=t,{grid_cols:m=[2]}=t,{grid_rows:r=void 0}=t,{height:w="auto"}=t,{preview:c}=t,{allow_preview:A=!0}=t,{object_fit:j="cover"}=t,{show_share_button:g=!1}=t;const z=Re();let k=!0,E=null,M=f,v=c&&f?.length?0:null,U=v;function J(_){switch(_.code){case"Escape":_.preventDefault(),e(9,v=null);break;case"ArrowLeft":_.preventDefault(),e(9,v=i);break;case"ArrowRight":_.preventDefault(),e(9,v=n);break}}let h=[],F;async function ve(_){if(typeof _!="number")return;await Te(),h[_].focus();const{left:C,width:X}=F.getBoundingClientRect(),{left:I,width:Le}=h[_].getBoundingClientRect(),$=I-C+Le/2-X/2+F.scrollLeft;F?.scrollTo({left:$<0?0:$,behavior:"smooth"})}let W=0,Y=0,p="",x="";function je(){e(13,Y=window.innerHeight)}const ye=()=>e(9,v=null),Ae=()=>e(9,v=n);function Be(_,C){ee[_?"unshift":"push"](()=>{h[C]=_,e(10,h)})}const ze=_=>e(9,v=_);function Ge(_){ee[_?"unshift":"push"](()=>{F=_,e(11,F)})}function Ee(_){V.call(this,l,_)}function Se(_){V.call(this,l,_)}const Ce=_=>e(9,v=_);function De(){W=this.clientHeight,e(12,W)}return l.$$set=_=>{"container"in _&&e(0,s=_.container),"show_label"in _&&e(1,d=_.show_label),"label"in _&&e(2,o=_.label),"root"in _&&e(18,a=_.root),"root_url"in _&&e(19,u=_.root_url),"value"in _&&e(3,f=_.value),"grid_cols"in _&&e(20,m=_.grid_cols),"grid_rows"in _&&e(21,r=_.grid_rows),"height"in _&&e(4,w=_.height),"preview"in _&&e(22,c=_.preview),"allow_preview"in _&&e(5,A=_.allow_preview),"object_fit"in _&&e(6,j=_.object_fit),"show_share_button"in _&&e(7,g=_.show_share_button)},l.$$.update=()=>{if(l.$$.dirty[0]&8388616&&e(23,k=f==null||f.length==0?!0:k),l.$$.dirty[0]&786440&&e(8,E=f===null?null:f.map(_=>Array.isArray(_)?[te(_[0],a,u),_[1]]:[te(_,a,u),null])),l.$$.dirty[0]&29360648&&M!==f&&(k?(e(9,v=c&&f?.length?0:null),e(23,k=!1)):e(9,v=v!==null&&f!==null&&v<f.length?v:null),e(24,M=f)),l.$$.dirty[0]&768&&(i=((v??0)+(E?.length??0)-1)%(E?.length??0)),l.$$.dirty[0]&768&&e(16,n=((v??0)+1)%(E?.length??0)),l.$$.dirty[0]&33555200&&v!==U&&(e(25,U=v),v!==null&&z("select",{index:v,value:E?.[v][1]})),l.$$.dirty[0]&544&&A&&ve(v),l.$$.dirty[0]&1048576){let _=["","sm-","md-","lg-","xl-","2xl-"],C=Array.isArray(m)?m:[m];e(14,p=[0,0,0,0,0,0].map((X,I)=>`--${_[I]}grid-cols: var(--grid-${C?.[I]||C?.[C?.length-1]});`).join(" "))}if(l.$$.dirty[0]&2097152){let _=["","sm-","md-","lg-","xl-","2xl-"],C=Array.isArray(r)?r:[r];e(15,x=[0,0,0,0,0,0].map((X,I)=>`--${_[I]}grid-rows: var(--grid-${C?.[I]||C?.[C?.length-1]});`).join(" "))}},[s,d,o,f,w,A,j,g,E,v,h,F,W,Y,p,x,n,J,a,u,m,r,c,k,M,U,je,ye,Ae,Be,ze,Ge,Ee,Se,Ce,De]}class $e extends ce{constructor(t){super(),he(this,t,xe,pe,me,{container:0,show_label:1,label:2,root:18,root_url:19,value:3,grid_cols:20,grid_rows:21,height:4,preview:22,allow_preview:5,object_fit:6,show_share_button:7},null,[-1,-1])}}function el(l){let t,e,i,n;const s=[l[0]];let d={};for(let o=0;o<s.length;o+=1)d=Ie(d,s[o]);return t=new Me({props:d}),i=new $e({props:{label:l[2],value:l[8],show_label:l[1],root:l[3],root_url:l[4],grid_cols:l[12],grid_rows:l[13],height:l[14],preview:l[15],object_fit:l[17],allow_preview:l[16],show_share_button:l[18]}}),i.$on("select",l[19]),i.$on("share",l[20]),i.$on("error",l[21]),{c(){T(t.$$.fragment),e=R(),T(i.$$.fragment)},m(o,a){q(t,o,a),D(o,e,a),q(i,o,a),n=!0},p(o,a){const u=a&1?Fe(s,[Pe(o[0])]):{};t.$set(u);const f={};a&4&&(f.label=o[2]),a&256&&(f.value=o[8]),a&2&&(f.show_label=o[1]),a&8&&(f.root=o[3]),a&16&&(f.root_url=o[4]),a&4096&&(f.grid_cols=o[12]),a&8192&&(f.grid_rows=o[13]),a&16384&&(f.height=o[14]),a&32768&&(f.preview=o[15]),a&131072&&(f.object_fit=o[17]),a&65536&&(f.allow_preview=o[16]),a&262144&&(f.show_share_button=o[18]),i.$set(f)},i(o){n||(y(t.$$.fragment,o),y(i.$$.fragment,o),n=!0)},o(o){B(t.$$.fragment,o),B(i.$$.fragment,o),n=!1},d(o){o&&L(e),H(t,o),H(i,o)}}}function ll(l){let t,e;return t=new Ue({props:{visible:l[7],variant:"solid",padding:!1,elem_id:l[5],elem_classes:l[6],container:l[9],scale:l[10],min_width:l[11],allow_overflow:!1,height:typeof l[14]=="number"?l[14]:void 0,$$slots:{default:[el]},$$scope:{ctx:l}}}),{c(){T(t.$$.fragment)},m(i,n){q(t,i,n),e=!0},p(i,[n]){const s={};n&128&&(s.visible=i[7]),n&32&&(s.elem_id=i[5]),n&64&&(s.elem_classes=i[6]),n&512&&(s.container=i[9]),n&1024&&(s.scale=i[10]),n&2048&&(s.min_width=i[11]),n&16384&&(s.height=typeof i[14]=="number"?i[14]:void 0),n&4714783&&(s.$$scope={dirty:n,ctx:i}),t.$set(s)},i(i){e||(y(t.$$.fragment,i),e=!0)},o(i){B(t.$$.fragment,i),e=!1},d(i){H(t,i)}}}function tl(l,t,e){let{loading_status:i}=t,{show_label:n}=t,{label:s}=t,{root:d}=t,{root_url:o}=t,{elem_id:a=""}=t,{elem_classes:u=[]}=t,{visible:f=!0}=t,{value:m=null}=t,{container:r=!1}=t,{scale:w=null}=t,{min_width:c=void 0}=t,{grid_cols:A=[2]}=t,{grid_rows:j=void 0}=t,{height:g="auto"}=t,{preview:z}=t,{allow_preview:k=!0}=t,{object_fit:E="cover"}=t,{show_share_button:M=!1}=t;function v(h){V.call(this,l,h)}function U(h){V.call(this,l,h)}function J(h){V.call(this,l,h)}return l.$$set=h=>{"loading_status"in h&&e(0,i=h.loading_status),"show_label"in h&&e(1,n=h.show_label),"label"in h&&e(2,s=h.label),"root"in h&&e(3,d=h.root),"root_url"in h&&e(4,o=h.root_url),"elem_id"in h&&e(5,a=h.elem_id),"elem_classes"in h&&e(6,u=h.elem_classes),"visible"in h&&e(7,f=h.visible),"value"in h&&e(8,m=h.value),"container"in h&&e(9,r=h.container),"scale"in h&&e(10,w=h.scale),"min_width"in h&&e(11,c=h.min_width),"grid_cols"in h&&e(12,A=h.grid_cols),"grid_rows"in h&&e(13,j=h.grid_rows),"height"in h&&e(14,g=h.height),"preview"in h&&e(15,z=h.preview),"allow_preview"in h&&e(16,k=h.allow_preview),"object_fit"in h&&e(17,E=h.object_fit),"show_share_button"in h&&e(18,M=h.show_share_button)},[i,n,s,d,o,a,u,f,m,r,w,c,A,j,g,z,k,E,M,v,U,J]}class il extends ce{constructor(t){super(),he(this,t,tl,ll,me,{loading_status:0,show_label:1,label:2,root:3,root_url:4,elem_id:5,elem_classes:6,visible:7,value:8,container:9,scale:10,min_width:11,grid_cols:12,grid_rows:13,height:14,preview:15,allow_preview:16,object_fit:17,show_share_button:18})}}const ml=il,gl=["static"],wl=l=>({type:{payload:"Array<{ name: string } | [{ name: string }, string]>"},description:{payload:"list of objects, with filename and optional caption,"}});export{ml as Component,wl as document,gl as modes};
//# sourceMappingURL=index-576c66f7.js.map
